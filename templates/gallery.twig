{% extends "core.twig" %}

{% block content %}
<div class="docs">
    <h1 class="title">{% trans "Chart Gallery" %} <small>{% trans "See what others create with Datawrapper recently" %}</small></h1>
</div>
<div class="row">
    <div class="span3">
        <p>{% trans "Welcome to the public gallery of Datawrapper charts. Here you can see the charts other users have created recently. Click on the charts to see the interactive version." %}</p>
        <p>{% trans "1" %}</p>
        <p>{% trans "2" %}</p>
        <h3>Most active users</h3>
        <ul>
            <li>Guardian</li>
        </ul>
    </div>
    <div class="span9 gallery">

        {% if user.hasCharts %}
        <ul class="thumbnails">
            {% for chart in charts %}
            <li class="span3 chart" data-id="{{ chart.id }}">
                <div class="thumbnail">
                    <h3>{{ chart.title }}</h3></a>

                    <a href="/chart/{{ chart.id }}/edit"><img src="{% if chart.isPublic %}http://{{ DW_CHART_CACHE_DOMAIN }}/{{ chart.id }}/m.png{% else %}/static/img/nopreview.png{% endif %}" width="260" alt="">

                    {# <p class="pull-right">
                        <a href="#delete" class="delete" data-chart="{{ chart.id }}"><i class="icon-remove"></i></a>
                    </p> #}

                     
                    {# <p>{% trans "Created" %}: {{ chart.createdAt|date() }}<br/>
                     {% trans "Layout" %}: {{ chart.theme }} </p> #}
                </div>
            </li>
            {% endfor %}
        </ul>
        {% else %}

            <h2>{% trans "No charts here, yet" %}</h2>
            <p>{% trans "Why not <a href='/chart/create'>create a new chart now</a>?" %}</p>

        {% endif %}
    </div>
    <div class="span3 gallery-filter" style="position:relative;left: 30px">
        <h2>{% trans "By Month" %}</h2>

        <ul class="unstyled">
            {% for month in bymonth %}
            {% if key == 'month' and val == month.id %}
            <li class="active"><a href="/gallery/"><i class="icon-check"></i> {{ month.name }} </a> ({{ month.count }}) </li>
            {% else %}
            <li><a href="/gallery/by/month/{{ month.id }}">{{ month.name }}</a> ({{ month.count }})</li>
            {% endif %}
            {% endfor %}
        </ul>

        <h2>{% trans "By Visualisation" %}</h2>

        <ul class="unstyled">
            {% for vis in byvis %}
            {% if key == 'vis' and val == vis.id %}
            <li class="active"><a href="/gallery/"><i class="icon-check"></i> {{ vis.name }} </a> ({{ vis.count }}) </li>
            {% else %}
            <li><a href="/gallery/by/vis/{{ vis.id }}">{{ vis.name }}</a> ({{ vis.count }})</li>
            {% endif %}
            {% endfor %}
        </ul>

        <h2>{% trans "By Layout" %}</h2>

        <ul class="unstyled">
            {% for layout in bylayout %}
            {% if key == 'layout' and val == layout.id %}
            <li class="active"><a href="/gallery/"><i class="icon-check"></i> {{ layout.name }} </a> ({{ layout.count }}) </li>
            {% else %}
            <li><a href="/gallery/by/layout/{{ layout.id }}">{{ layout.name }}</a> ({{ layout.count }})</li>
            {% endif %}

            {% endfor %}
        </ul>
    </div>
</div>
<script type="text/javascript" src="/static/vendor/masonry/jquery.masonry.min.js"></script>
<script type="text/javascript">
$(function(){
  //*

  function layout() {
      /*$('.gallery .thumbnails').masonry({
        itemSelector : 'li',
        columnWidth : function(w) { return w/3; }
      });
*/
  }

  layout();

  setTimeout(layout, 1000);
   // */

});

$('body').load(function() {

});

</script>

{{ parent() }}
{% endblock %}