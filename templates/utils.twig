
{% block pagination %}

{% if pager.first != pager.last %}
<div class="pagination">
    <ul>
        <li {% if pager.first == pager.current %}class="disabled"{% endif %}>
            <a href="?page={{ pager.first }}">«</a>
        </li>
        {% for pg in pager.pages %}
            <li {% if pg == pager.current %}class="active" {% endif %}>
                <a href="?page={{ pg }}">{{ pg + 1 }}</a></li>
        {% endfor %}
        <li {% if pager.last == pager.current %}class="disabled"{% endif %}>
            <a href="?page={{ pager.last }}">»</a>
        </li>
    </ul>
</div>
{% endif %}

{% endblock %}


{% block alert %}

    {% if alert %}
        <div class="alert alert-{{ alert.type }}">
            <a class="close" data-dismiss="alert" href="#">&times;</a>
            <div>{{ alert.message }}</div>
        </div>
    {% endif %}

{% endblock %}


{% block gallerythumb %}
    <li class="span3 chart" data-id="{{ chart.id }}">
        <div data-id="{{ chart.id }}" data-bg="{{ chart.metadata.publish.background }}" data-w="{{ chart.metadata.publish['embed-width'] }}" data-h="{{ chart.metadata.publish['embed-height'] }}" class="thumbnail">
            <h3><a href="/gallery/#/{{ chart.id }}" style="color:{% if  chart.metadata.publish.text %}{{ chart.metadata.publish.text }}{% else %}#000{% endif %};text-shadow:1px 1px 3px {% if  chart.metadata.publish.background %}{{ chart.metadata.publish.background }}{% else %}#fff{% endif %};">{{ chart.title }}</a></h3>

            <a href="/gallery/#/{{ chart.id }}" >
                <img src="http://{{ DW_CHART_CACHE_DOMAIN }}/{{ chart.id }}/m.png" width="260" alt="" style="background:{{ chart.metadata.publish.background }}"></a>

        </div>
    </li>
{% endblock %}


{% block teaserlogin %}
        {% if not user.isLoggedIn %}
                <a href="#login" class="btn btn-primary btn-login btn-large">
                    <i class="icon-user icon-white"></i> {% trans "Login / Sign Up" %}
                </a>
                <a href="/chart/create" class="btn btn-login btn-large">
                    <i class="icon-pencil"></i> {% trans "Try it now!" %}
                </a>
        {% else %}
                <a href="/chart/create" class="btn-primary btn btn-large"><i class="icon-pencil icon-white"></i> {% trans "Create a Chart" %}</a>
                <a href="/mycharts" class="btn btn-large"><i class="icon-signal"></i> {% trans "My Charts" %}</a>
        {% endif %}
{% endblock %}



{% block chartMenuHTML %}
    <div class="chartMenuCont">
        <div class="chartMenu">
            <a href="{{ DW_CHART_URL }}" target="_blank" title="{% trans "Fullscreen" %}" data-toggle="fullscreen"><i class="icon-fullscreen"></i> {% trans "Fullscreen" %}</a>
            <a href="{{ DW_DOMAIN }}/chart/{{ chart.id }}/data" title="{% trans "Get the data" %}"><i class="icon-download"></i> {% trans "Data" %}</a>
            <a href="{{ DW_DOMAIN }}/chart/{{ chart.id }}/data" title="{% trans "Share this chart" %}"><i class="icon-share"></i> {% trans "Share" %}</a>
        </div>
    </div>
{% endblock %}


{% block chartMenu %}

    <style type="text/css">

    .chartMenuCont {
        position: absolute;
        top: -40px;
        left: 0px;
        right: 0px;
        opacity: 0;

        -webkit-transition: all .15s ease-out;
           -moz-transition: all .15s ease-out;
            -ms-transition: all .15s ease-out;
             -o-transition: all .15s ease-out;
                transition: all .15s ease-out;
    }

    .chart #header:hover .chartMenuCont {
        display: block;
        top: -5px;
        opacity: 1;
    }

    .chart:hover .chartMenuCont {
        display: block;
        opacity: 1;
        top: -5px;
    }

    .chart.menuSeen:hover .chartMenuCont {
        top: -40px;
        opacity: 0;
    }

    .chartMenu {
        text-align: center;
        z-index: 1000;
        display: block;
        width: 250px;
        margin: 0 auto;
        height: 32px;
        background: #fff;
        padding: 2px 9px 4px 9px;
        border-radius: 0 0 8px 8px;
        box-shadow: 2px 5px 10px #999;
    }

    .fullscreen .chartMenu {
        display: none;
    }

    .chartMenu a {
        line-height: 32px;
        text-decoration: none;
        color: #888;
        font-size: 14px;
        padding: 0 5px;
        font-weight: 300;
    }

    .chartMenu a:hover {
        color: #000;
    }

    .chartMenu a i {
        vertical-align: baseline;
    }

    .chartMenu a i.icon-fullscreen {
        vertical-align: middle;
    }

    a:hover .icon-fullscreen, a:hover .icon-share, a:hover .icon-download {
        opacity: 1;
    }

    .icon-fullscreen, .icon-share, .icon-download {
        background-image: url(//assets-datawrapper.s3.amazonaws.com/chart-icons-small.png);
        background-repeat: no-repeat;
        display: inline-block;
        margin-left: 6px;
        opacity: 0.5;
        cursor: pointer;
    }

    .icon-fullscreen:hover, .icon-share:hover, .icon-download:hover {
        opacity: 0.8;
    }

    .icon-fullscreen {
        width: 16px;
        height: 15px;
        background-position: 0 0;
    }

    .reverse .icon-fullscreen { background-position: 0 -15px; }

    .icon-share {
        width: 17px;
        height: 15px;
        background-position: -32px 0;
    }

    .reverse .icon-share { background-position: -32px -15px; }

    .icon-download {
        width: 14px;
        height: 15px;
        background-position: -17px 0;
    }

    .reverse .icon-download { background-position: -17px -15px; }


    </style>
    {{ block('chartMenuHTML') }}

{% endblock %}


{% block chartMenuSmall %}

    <style type="text/css">

    .chartMenu {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 1000;
        width: 80px;
        text-align: right;
        height: 26px;
        background: #fff;
        padding-top: 6px;
        padding-right: 9px;
        border-radius: 5px;
        box-shadow: 2px 5px 5px #ddd;
        display: none;
    }

    #header:hover .chartMenu {
        display: block;
    }

    .icon-fullscreen, .icon-share, .icon-download {
        background-image: url(//assets-datawrapper.s3.amazonaws.com/chart-icons-small.png);
        background-repeat: no-repeat;
        display: inline-block;
        margin-left: 6px;
        opacity: 0.3;
        cursor: pointer;
    }

    .icon-fullscreen:hover, .icon-share:hover, .icon-download:hover {
        opacity: 0.8;
    }

    .icon-fullscreen {
        width: 16px;
        height: 15px;
        background-position: 0 0;
    }

    .reverse .icon-fullscreen { background-position: 0 -15px; }

    .icon-share {
        width: 17px;
        height: 15px;
        background-position: -32px 0;
    }

    .reverse .icon-share { background-position: -32px -15px; }

    .icon-download {
        width: 14px;
        height: 15px;
        background-position: -17px 0;
    }

    .reverse .icon-download { background-position: -17px -15px; }

    </style>
    {{ block('chartMenuHTML') }}

{% endblock %}